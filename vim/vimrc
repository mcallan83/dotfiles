" vim:fdm=marker

" Local Vimrc Before {{{

if filereadable(expand("~/.local.vimrc.before"))
    source ~/.local.vimrc.before
endif

" }}}
" NeoBundle {{{

if has('vim_starting')
    set nocompatible
    set runtimepath+=~/.vim/bundle/neobundle.vim/
endif
let vundle_readme=expand('~/.vim/bundle/neobundle.vim/README.md')
if !filereadable(vundle_readme)
    echo "Installing NeoBundle..."
    echo ""
    silent !mkdir -p ~/.vim/bundle
    silent !git clone https://github.com/Shougo/neobundle.vim ~/.vim/bundle/neobundle.vim/
endif
call neobundle#begin(expand('~/.vim/bundle/'))
NeoBundleFetch 'Shougo/neobundle.vim'

" packages
" ========
NeoBundle 'altercation/vim-colors-solarized'

call neobundle#end()
filetype plugin indent on
NeoBundleCheck

" }}}
" General {{{

    syntax on               " syntax highligting
    set mouse=a             " enable mouse
    set mousehide           " hide mouse cursor while typing
    scriptencoding utf-8

    " clipboard
    if has('clipboard')
        " use + register for copy-paste
        if has('unnamedplus')
            set clipboard=unnamed,unnamedplus
        " use * register for copy-paste
        else
            set clipboard=unnamed
        endif
    endif

    " disable backups
    set nobackup
    set nowb
    set noswapfile

" }}}
" UI {{{

    set background=dark " assume a dark background

    " solarized
    let g:solarized_visibility="high"
    let g:solarized_diffmode="high"
    let g:solarized_menu=0
    " let g:solarized_termcolors=256 " use downgraded color scheme
    colorscheme solarized

    " highlight cursorline 
    set cursorline              " highlight cursor line
    highlight clear SignColumn  " make signcolumn match background
    highlight clear LineNr      " make current line number have same BG color

    set backspace=indent,eol,start      " enable a true backspace
    set number                          " line numbers

" }}}
" Formatting {{{

    set autoindent      " indent to same level as previous line
    set smartindent     " smart indent
    set expandtab       " use spaces
    set shiftwidth=4    " use indents of 4 spaces
    set tabstop=4       " tabs are spaces
    set softtabstop=4   " let backspace delete indent

    set nojoinspaces    " prevents inserting two spaces after punctuation on join (J)

    set wrap            " wrap lines
    set showbreak=â‡‡     " fancy character for line wraps

" }}}
" Filetype Specific {{{

augroup filetypes 
    au!

    " disable automatic comment insertion for all files
    au FileType * setlocal formatoptions-=c formatoptions-=r formatoptions-=o
augroup END

" }}}
" Key Maps {{{

    " leader
    let mapleader = "\,"
    let g:mapleader = "\,"

    " exit insert mode with JJ
    inoremap jj <Esc>

    " source vimrc
    map <leader>vimrc :tabe ~/.vim/.vimrc<cr>
" }}}
" Functions {{{

    " toggle background
    function! ToggleBg()
        let s:tbg = &background
        if s:tbg == "dark"
            set background=light
        else
            set background=dark
        endif
    endfunction
    noremap <leader>bg :call ToggleBg()<CR>

    " autoload vimrc
    augroup reload_vimrc
        au!
        au BufWritePost $MYVIMRC source $MYVIMRC
    augroup END

"
" }}}
" Local Vimrc After {{{

    if filereadable(expand("~/.local.vimrc.after"))
        source ~/.local.vimrc.after
    endif

" }}}

